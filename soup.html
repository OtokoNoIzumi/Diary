<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>温润如玉 · 养生炖汤谱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap');

                        :root {
            /* 温暖琥珀色系 - 传统养生 */
            --primary-warm: #f59e0b;
            --secondary-warm: #f97316;
            --accent-warm: #eab308;
            --bg-warm: #fef3c7;
            --text-warm: #92400e;

            /* 甜美食物色系 - 科学分析 */
            --primary-cool: #ff8787;      /* 草莓牛奶粉 - 温暖柔和 */
            --secondary-cool: #ffb366;    /* 蜜桃橙 - 与粉色衔接 */
            --accent-cool: #ffd93d;       /* 柠檬奶昔黄 - 明快点缀 */
            --bg-cool: #fff0f6;           /* 樱花粉背景 - 最温柔 */
            --text-cool: #8b5a3c;         /* 可可棕 - 温暖深色 */
        }

        * {
            box-sizing: border-box !important;
        }

        body {
            font-family: 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #fef3c7 0%, #fef7cd 100%);
            transition: all 0.8s ease;
        }

        body.science-mode {
            background: linear-gradient(135deg, var(--bg-cool) 0%, #ffe4e1 100%) !important;
        }

        .main-title {
            font-family: 'Ma Shan Zheng', cursive !important;
            background: linear-gradient(45deg, var(--primary-warm), var(--secondary-warm)) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
            transition: all 0.6s ease !important;
        }

        .science-mode .main-title {
            background: linear-gradient(45deg, var(--primary-cool), var(--secondary-cool)) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }

                        .soup-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 24px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
            box-shadow:
                0 4px 20px rgba(245, 158, 11, 0.08),
                0 1px 3px rgba(245, 158, 11, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            position: relative;
            overflow: hidden;
        }

        .soup-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-warm), var(--accent-warm), var(--secondary-warm));
            border-radius: 24px 24px 0 0;
        }

        .soup-card::after {
            content: '';
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            background: radial-gradient(circle, var(--accent-warm)20, transparent 70%);
            border-radius: 50%;
            opacity: 0.6;
        }

        .soup-card:hover {
            transform: translateY(-4px);
            border-color: rgba(245, 158, 11, 0.3);
            box-shadow:
                0 8px 30px rgba(245, 158, 11, 0.15),
                0 4px 10px rgba(245, 158, 11, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

                .science-mode .soup-card {
            border-color: rgba(255, 135, 135, 0.2);
            box-shadow:
                0 4px 20px rgba(255, 135, 135, 0.08),
                0 1px 3px rgba(255, 135, 135, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .science-mode .soup-card::before {
            background: linear-gradient(90deg, var(--primary-cool), var(--accent-cool), var(--secondary-cool));
        }

        .science-mode .soup-card::after {
            background: radial-gradient(circle, var(--accent-cool)20, transparent 70%);
        }

                .science-mode .soup-card:hover {
            border-color: rgba(255, 135, 135, 0.3);
            box-shadow:
                0 8px 30px rgba(255, 135, 135, 0.15),
                0 4px 10px rgba(255, 135, 135, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .soup-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(245, 158, 11, 0.2);
        }

        .science-mode .soup-card:hover {
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.2) !important;
        }

        .soup-title {
            color: var(--text-warm) !important;
            font-weight: 600 !important;
            transition: color 0.6s ease !important;
        }

        .science-mode .soup-title {
            color: var(--text-cool) !important;
        }

        .ingredient-tag {
            background: linear-gradient(135deg, var(--accent-warm), var(--secondary-warm)) !important;
            color: white !important;
            padding: 4px 12px !important;
            border-radius: 15px !important;
            font-size: 0.8rem !important;
            margin: 2px !important;
            display: inline-block !important;
            transition: all 0.3s ease !important;
        }

        .science-mode .ingredient-tag {
            background: linear-gradient(135deg, var(--accent-cool), var(--secondary-cool)) !important;
        }

        .effect-text {
            color: var(--primary-warm) !important;
            font-weight: 500 !important;
            line-height: 1.6 !important;
            transition: color 0.6s ease !important;
        }

        .science-mode .effect-text {
            color: var(--primary-cool) !important;
        }

        .geometric-decoration {
            position: absolute !important;
            width: 40px !important;
            height: 40px !important;
            border-radius: 50% !important;
            background: radial-gradient(circle, var(--accent-warm), transparent) !important;
            opacity: 0.3 !important;
            animation: float 6s ease-in-out infinite !important;
        }

        .science-mode .geometric-decoration {
            background: radial-gradient(circle, var(--accent-cool), transparent) !important;
        }

        .secret-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 8px;
            height: 8px;
            background: #f59e0b;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0.2;
            transition: all 0.3s ease;
            border: none;
            z-index: 1000;
        }

        .secret-toggle:hover {
            opacity: 0.8;
            transform: scale(3);
        }

        .science-mode .secret-toggle {
            background: var(--accent-cool) !important;
        }

        .science-mode .secret-toggle:hover {
            background: var(--primary-cool) !important;
        }

        .author-section {
            background: rgba(255, 255, 255, 0.8) !important;
            border: 2px solid var(--accent-warm) !important;
            border-radius: 20px !important;
            padding: 2rem !important;
            margin: 3rem 0 !important;
            backdrop-filter: blur(10px) !important;
            transition: all 0.6s ease !important;
        }

        .science-mode .author-section {
            border-color: var(--accent-cool) !important;
        }

        .social-link {
            color: var(--primary-warm) !important;
            text-decoration: none !important;
            transition: all 0.3s ease !important;
            border-bottom: 2px solid transparent !important;
        }

        .social-link:hover {
            color: var(--secondary-warm) !important;
            border-bottom-color: var(--accent-warm) !important;
        }

        .science-mode .social-link {
            color: var(--primary-cool) !important;
        }

        .science-mode .social-link:hover {
            color: var(--secondary-cool) !important;
            border-bottom-color: var(--accent-cool) !important;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(-10px) rotate(240deg); }
        }

        @keyframes shimmer {
            0% { opacity: 0.3; }
            50% { opacity: 0.8; }
            100% { opacity: 0.3; }
        }

                @keyframes wishAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .shimmer {
            animation: shimmer 3s ease-in-out infinite !important;
        }

        .fade-transition {
            opacity: 1 !important;
            transition: opacity 0.5s ease-in-out !important;
        }

        .fade-transition.fading {
            opacity: 0 !important;
        }

        .wish-section {
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid var(--accent-warm);
            border-radius: 25px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            backdrop-filter: blur(15px);
            box-shadow: 0 15px 35px rgba(245, 158, 11, 0.15);
            transition: all 0.6s ease;
        }

        .science-mode .wish-section {
            border-color: var(--accent-cool);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.15);
        }

                .wish-button {
            background: linear-gradient(135deg, var(--primary-warm), var(--secondary-warm));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 28px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                0 4px 14px rgba(245, 158, 11, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            animation: wishAnimation 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .wish-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .wish-button:hover::before {
            animation: shimmer 0.8s ease-in-out;
            opacity: 1;
        }

        .wish-button:hover {
            transform: translateY(-2px);
            box-shadow:
                0 8px 25px rgba(245, 158, 11, 0.35),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

                .science-mode .wish-button {
            background: linear-gradient(135deg, var(--primary-cool), var(--secondary-cool));
            box-shadow:
                0 4px 14px rgba(255, 135, 135, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .science-mode .wish-button:hover {
            box-shadow:
                0 8px 25px rgba(255, 135, 135, 0.35),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

                .today-soup {
            background: linear-gradient(145deg,
                rgba(255, 255, 255, 0.9),
                rgba(245, 158, 11, 0.05));
            border: 2px solid var(--primary-warm);
            border-radius: 32px;
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
            box-shadow:
                0 8px 32px rgba(245, 158, 11, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .today-soup::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg,
                var(--primary-warm),
                var(--accent-warm),
                var(--secondary-warm));
            border-radius: 32px 32px 0 0;
        }

        .today-soup::after {
            content: '✨';
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 1.2rem;
            animation: shimmer 3s ease-in-out infinite;
            opacity: 0.8;
        }

                .science-mode .today-soup {
            background: linear-gradient(145deg,
                rgba(255, 255, 255, 0.9),
                rgba(255, 135, 135, 0.05));
            border-color: var(--primary-cool);
            box-shadow:
                0 8px 32px rgba(255, 135, 135, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .science-mode .today-soup::before {
            background: linear-gradient(90deg,
                var(--primary-cool),
                var(--accent-cool),
                var(--secondary-cool));
        }

                .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-warm);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .mode-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .science-mode .mode-toggle {
            background: var(--primary-cool);
            box-shadow: 0 4px 15px rgba(255, 135, 135, 0.3);
        }

        .science-mode .mode-toggle:hover {
            box-shadow: 0 6px 20px rgba(255, 135, 135, 0.4);
        }

        @media (max-width: 768px) {
            .soup-card {
                margin: 1rem 0 !important;
            }

            .secret-toggle {
                bottom: 15px !important;
                right: 15px !important;
                width: 12px !important;
            height: 12px !important;
            }

            .secret-toggle:hover {
                transform: scale(2) !important;
            }
        }
    </style>
</head>
<body>
    <!-- 装饰性几何元素 -->
    <div class="geometric-decoration shimmer" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
    <div class="geometric-decoration shimmer" style="top: 20%; right: 8%; animation-delay: 2s;"></div>
    <div class="geometric-decoration shimmer" style="top: 60%; left: 3%; animation-delay: 4s;"></div>
    <div class="geometric-decoration shimmer" style="top: 80%; right: 10%; animation-delay: 1s;"></div>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 页面标题 -->
        <header class="text-center mb-12">
            <h1 class="main-title text-5xl md:text-7xl font-bold mb-4">温润如玉</h1>
            <p class="soup-title text-xl md:text-2xl mb-2">养生炖汤谱</p>
            <div class="w-32 h-1 mx-auto rounded-full" style="background: linear-gradient(90deg, var(--primary-warm), var(--accent-warm)); transition: all 0.6s ease;" id="title-divider"></div>
        </header>

        <!-- 许愿得方区域 -->
        <div class="wish-section" id="wish-section">
            <h2 class="soup-title text-3xl font-bold mb-4">🙏 诚心许愿</h2>
            <p class="soup-title text-lg mb-6">静心凝神，为您推荐今日最宜汤方</p>
            <button class="wish-button" id="wish-btn">许愿得方</button>
        </div>

        <!-- 今日汤方显示区域 -->
        <div class="today-soup" id="today-soup" style="display: none;">
            <div class="text-center mb-4">
                <h3 class="soup-title text-2xl font-bold mb-2">今日汤方</h3>
                <div class="flex justify-center items-center gap-4 mb-4">
                    <button class="wish-button text-sm px-4 py-2" id="another-soup-btn">另求一方</button>
                    <button class="wish-button text-sm px-4 py-2" id="view-all-btn" style="display: none;">查看汤方</button>
                </div>
            </div>
            <div id="today-soup-content"></div>
        </div>

        <!-- 炖汤卡片网格 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16" id="soup-grid" style="display: none;">
            <!-- 动态生成的汤品卡片将在这里显示 -->
        </div>

        <!-- 作者信息区域 -->
        <footer class="author-section text-center">
            <h3 class="soup-title text-2xl font-bold mb-4">制汤师傅</h3>
            <p class="soup-title text-lg mb-4">Izumi.屈源</p>
            <div class="flex flex-wrap justify-center gap-6 mb-4">
                <a href="https://otokonoizumi.github.io" target="_blank" class="social-link font-medium">📚 Github主页</a>
                <a href="https://space.bilibili.com/82205" target="_blank" class="social-link font-medium">🎬 Bilibili空间</a>
            </div>
            <p class="soup-title text-sm opacity-75">© 2025 吃好喝好每一天 版权所有</p>
        </footer>
    </div>

    <!-- 明显的模式切换按钮 -->
    <button class="mode-toggle" id="main-mode-toggle">养生视角</button>

    <!-- 保留隐藏的切换按钮 -->
    <button class="secret-toggle" id="toggle-btn"></button>

    <script>
        // 炖汤数据
        const soupData = {
            traditional: [
                { name: "五指毛桃炖鸡汤", ingredients: ["五指毛桃", "老鸡", "枸杞", "红枣"], effect: "增强脾胃功能，祛湿气，提升家宅稳定和贵人运" },
                { name: "花旗参炖竹丝鸡汤", ingredients: ["花旗参", "竹丝鸡", "玉竹"], effect: "补气滋阴，改善疲劳，增强事业运和决策力" },
                { name: "霸王花炖猪骨汤", ingredients: ["霸王花", "猪骨", "南北杏"], effect: "润肺止咳，清热解暑，化解负面能量" },
                { name: "冬瓜薏米老鸭汤", ingredients: ["冬瓜", "薏米", "老鸭", "陈皮"], effect: "强力祛湿，降火消肿，平衡潮湿环境带来的滞气" },
                { name: "椰子炖竹丝鸡汤", ingredients: ["椰子肉", "竹丝鸡", "淮山"], effect: "滋补虚损，美容养颜，促进家庭财运和谐" },
                { name: "党参黄芪炖瘦肉汤", ingredients: ["党参", "黄芪", "瘦肉", "枸杞"], effect: "提升免疫力，补气强身，增强家宅阳气" },
                { name: "海底椰雪梨炖瘦肉", ingredients: ["海底椰", "雪梨", "瘦肉", "无花果"], effect: "润燥止咳，清心降火，缓解秋季干燥带来的情绪波动" },
                { name: "黑豆杜仲炖猪尾汤", ingredients: ["黑豆", "杜仲", "猪尾", "核桃"], effect: "补肾强腰，延缓衰老，稳固健康运势" },
                { name: "莲藕花生炖排骨汤", ingredients: ["莲藕", "花生", "排骨", "红枣"], effect: "补血健脾，改善消化，促进人际关系的顺畅" },
                { name: "虫草花炖乳鸽汤", ingredients: ["虫草花", "乳鸽", "淮山", "桂圆"], effect: "抗衰老，增强肝肾功能，提升个人气场和财运" },
                { name: "沙参玉竹炖水鸭汤", ingredients: ["沙参", "玉竹", "水鸭", "百合"], effect: "滋阴润燥，改善虚火，增进感情和谐" },
                { name: "淮山芡实炖鲫鱼汤", ingredients: ["淮山", "芡实", "鲫鱼", "茯苓"], effect: "健脾祛湿，固肾止泻，象征年年有余，稳定家运" },
                { name: "当归红枣炖羊肉汤", ingredients: ["当归", "红枣", "羊肉", "生姜"], effect: "补血暖身，改善寒性体质，增强冬季阳气" },
                { name: "陈皮绿豆炖老鸽汤", ingredients: ["陈皮", "绿豆", "老鸽", "莲子"], effect: "清热解毒，理气化痰，化解燥热环境的不利影响" },
                { name: "天麻炖鱼头汤", ingredients: ["天麻", "鳙鱼头", "川芎", "白芷"], effect: "缓解头痛，改善睡眠，提升专注力和学业运" }
            ],
            scientific: [
                { name: "五指毛桃炖鸡汤", ingredients: ["五指毛桃", "老鸡", "枸杞", "红枣"], effect: "椰香渗透鸡肉，红枣微甜提鲜，鸡肉蛋白质完全释放" },
                { name: "花旗参炖竹丝鸡汤", ingredients: ["花旗参", "竹丝鸡", "玉竹"], effect: "微苦回甘激发鲜味，玉竹增加汤体粘稠感，低脂高蛋白" },
                { name: "霸王花炖猪骨汤", ingredients: ["霸王花", "猪骨", "南北杏"], effect: "霸王花黏液包裹骨香，杏仁油脂乳化汤色，钙质加倍溶解" },
                { name: "冬瓜薏米老鸭汤", ingredients: ["冬瓜", "薏米", "老鸭", "陈皮"], effect: "冬瓜透明化甜，鸭油被薏米吸附，陈皮挥发油去腥增香" },
                { name: "椰子炖竹丝鸡汤", ingredients: ["椰子肉", "竹丝鸡", "淮山"], effect: "椰奶感汤底，淮山淀粉增稠，饱和脂肪酸与不饱和脂肪酸1:1平衡" },
                { name: "党参黄芪炖瘦肉汤", ingredients: ["党参", "黄芪", "瘦肉", "枸杞"], effect: "药草木质香中和肉腥，肌苷酸鲜味浓度提升30%" },
                { name: "海底椰雪梨炖瘦肉", ingredients: ["海底椰", "雪梨", "瘦肉", "无花果"], effect: "雪梨脆粒感留存，无花果籽爆破感，瘦肉半胱氨酸释放甜味" },
                { name: "黑豆杜仲炖猪尾汤", ingredients: ["黑豆", "杜仲", "猪尾", "核桃"], effect: "黑豆皮单宁涩感平衡胶原蛋白腻感，核桃油脂形成乳浊液" },
                { name: "莲藕花生炖排骨汤", ingredients: ["莲藕", "花生", "排骨", "红枣"], effect: "莲藕七孔吸饱肉汁，花生红衣保留脆度，铁元素生物利用率提高" },
                { name: "虫草花炖乳鸽汤", ingredients: ["虫草花", "乳鸽", "淮山", "桂圆"], effect: "虫草花嚼出蟹肉丝感，桂圆发酵甜味，乳鸽肌纤维短易消化" },
                { name: "沙参玉竹炖水鸭汤", ingredients: ["沙参", "玉竹", "水鸭", "百合"], effect: "玉竹多糖粘唇，百合瓣煮化出粉质感，鸭肉不饱和脂肪酸占比65%" },
                { name: "淮山芡实炖鲫鱼汤", ingredients: ["淮山", "芡实", "鲫鱼", "茯苓"], effect: "鲫鱼胶质拉丝，芡实外韧内粉，茯苓三萜酸降低鱼腥阈值" },
                { name: "当归红枣炖羊肉汤", ingredients: ["当归", "红枣", "羊肉", "生姜"], effect: "当归精油覆盖羊膻，红枣焦糖化甜，血红素铁含量达5mg/100g" },
                { name: "陈皮绿豆炖老鸽汤", ingredients: ["陈皮", "绿豆", "老鸽", "莲子"], effect: "陈皮柠檬烯刺激唾液，绿豆沙感沉淀，莲子碱中和胃酸" },
                { name: "天麻炖鱼头汤", ingredients: ["天麻", "鳙鱼头", "川芎", "白芷"], effect: "鱼脑冻状精华，天麻素无味但提升鲜味感知，欧米伽3脂肪酸低温不流失" }
            ]
        };

                let currentMode = 'traditional';
        let todaySoup = null;
        let todaySoupMode = 'traditional';
        let anotherSoupClickCount = 0;

                        // 创建汤品卡片
        function createSoupCard(soup) {
            return `
                <div class="soup-card fade-transition p-8 pt-6">
                    <h3 class="soup-title text-xl font-bold mb-5 text-center leading-tight">${soup.name}</h3>
                    <div class="mb-5">
                        <h4 class="soup-title font-semibold mb-3 text-sm uppercase tracking-wide opacity-80">主要食材</h4>
                        <div class="flex flex-wrap gap-2">
                            ${soup.ingredients.map(ingredient =>
                                `<span class="ingredient-tag">${ingredient}</span>`
                            ).join('')}
                        </div>
                    </div>
                    <div>
                        <h4 class="soup-title font-semibold mb-3 text-sm uppercase tracking-wide opacity-80">综合功效</h4>
                        <p class="effect-text text-sm leading-relaxed font-medium">${soup.effect}</p>
                    </div>
                </div>
            `;
        }

        // 创建今日汤方卡片
        function createTodaySoupCard(soup, mode) {
            const data = mode === 'traditional' ?
                soupData.traditional.find(s => s.name === soup.name) :
                soupData.scientific.find(s => s.name === soup.name);

            return `
                <div class="soup-card fade-transition p-6 mx-auto max-w-2xl">
                    <div class="relative z-10">
                        <h3 class="soup-title text-2xl font-bold mb-6 text-center">${data.name}</h3>
                        <div class="mb-6">
                            <h4 class="soup-title font-semibold mb-3 text-lg">主要食材：</h4>
                            <div class="flex flex-wrap justify-center">
                                ${data.ingredients.map(ingredient =>
                                    `<span class="ingredient-tag text-base px-4 py-2 m-1">${ingredient}</span>`
                                ).join('')}
                            </div>
                        </div>
                        <div>
                            <h4 class="soup-title font-semibold mb-3 text-lg">综合功效：</h4>
                            <p class="effect-text text-base leading-relaxed text-center">${data.effect}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // 渲染汤品列表
        function renderSoups(mode) {
            const grid = document.getElementById('soup-grid');
            const cards = grid.querySelectorAll('.soup-card');

            // 淡出动画
            cards.forEach(card => card.classList.add('fading'));

            setTimeout(() => {
                grid.innerHTML = soupData[mode].map(soup => createSoupCard(soup)).join('');

                // 淡入动画
                setTimeout(() => {
                    const newCards = grid.querySelectorAll('.soup-card');
                    newCards.forEach(card => card.classList.remove('fading'));
                }, 50);
            }, 250);
        }

        // 随机获取汤方
        function getRandomSoup() {
            const randomIndex = Math.floor(Math.random() * soupData.traditional.length);
            return soupData.traditional[randomIndex];
        }

                // 许愿得方功能
        function makeWish() {
            const wishBtn = document.getElementById('wish-btn');
            const todaySoupDiv = document.getElementById('today-soup');
            const wishSection = document.getElementById('wish-section');

            // 按钮动画效果
            wishBtn.style.transform = 'scale(0.95)';
            wishBtn.innerHTML = '正在感应...';

            setTimeout(() => {
                todaySoup = getRandomSoup();

                // 显示今日汤方
                wishSection.style.display = 'none';
                todaySoupDiv.style.display = 'block';
                updateTodaySoupContent();

                // 滚动到今日汤方
                todaySoupDiv.scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        }

                // 更新今日汤方内容
        function updateTodaySoupContent() {
            const content = document.getElementById('today-soup-content');
            // 今日汤方跟随全局模式
            content.innerHTML = createTodaySoupCard(todaySoup, currentMode);
        }

                // 另求一方
        function getAnotherSoup() {
            const btn = document.getElementById('another-soup-btn');
            const viewAllBtn = document.getElementById('view-all-btn');

            btn.innerHTML = '正在占卜...';
            btn.disabled = true;

            setTimeout(() => {
                todaySoup = getRandomSoup();
                updateTodaySoupContent();

                anotherSoupClickCount++;

                if (anotherSoupClickCount >= 2) {
                    // 点击了2次后显示"查看汤方"按钮
                    viewAllBtn.style.display = 'inline-block';
                    btn.innerHTML = '另求一方';
                } else {
                    btn.innerHTML = '另求一方';
                }

                btn.disabled = false;
            }, 1000);
        }

        // 查看汤方
        function viewAllSoups() {
            const soupGrid = document.getElementById('soup-grid');
            soupGrid.style.display = 'grid';

            // 滚动到汤方列表
            soupGrid.scrollIntoView({ behavior: 'smooth' });
        }

        // 切换全局模式
        function toggleMode() {
            const body = document.body;
            const divider = document.getElementById('title-divider');
            const mainToggle = document.getElementById('main-mode-toggle');

            if (currentMode === 'traditional') {
                currentMode = 'scientific';
                body.classList.add('science-mode');
                divider.style.background = 'linear-gradient(90deg, var(--primary-cool), var(--accent-cool))';
                mainToggle.innerHTML = '超养生视角';
            } else {
                currentMode = 'traditional';
                body.classList.remove('science-mode');
                divider.style.background = 'linear-gradient(90deg, var(--primary-warm), var(--accent-warm))';
                mainToggle.innerHTML = '养生视角';
            }

            renderSoups(currentMode);

            // 如果今日汤方已显示，同时更新
            if (todaySoup) {
                updateTodaySoupContent();
            }
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            renderSoups('traditional');

            // 绑定事件
            document.getElementById('wish-btn').addEventListener('click', makeWish);
            document.getElementById('another-soup-btn').addEventListener('click', getAnotherSoup);
            document.getElementById('view-all-btn').addEventListener('click', viewAllSoups);
            document.getElementById('main-mode-toggle').addEventListener('click', toggleMode);
            document.getElementById('toggle-btn').addEventListener('click', toggleMode);
        });

        // 添加一些交互效果
        document.addEventListener('mousemove', function(e) {
            const decorations = document.querySelectorAll('.geometric-decoration');
            decorations.forEach((decoration, index) => {
                const speed = (index + 1) * 0.001;
                const x = e.clientX * speed;
                const y = e.clientY * speed;
                decoration.style.transform = `translate(${x}px, ${y}px)`;
            });
        });
    </script>
</body>
</html>